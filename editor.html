<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Editor</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="js/color.js"></script>
    <script src="js/util.js"></script>
    <script src="jsontypes.js"></script>
    <style>
        #page-viewer {
            width: 600px;
            height: 800px;
            border: 1px solid black;
            color: white;

        }
    </style>
</head>

<body>
    <h2>Memory Book Editor</h2>
    <div>
        <span v-bind:title='message'>hello</span>
        <div id='page-viewer' v-bind:style='{background: bgColorInHex}'>
        </div>
    </div>



    <script>
        var Color = net.brehaut.Color;
        var page_viewer = new Vue({
            el: '#page-viewer',
            data() {
                return {
                    page: null
                }
            },
            mounted() {
                axios.get('editor/get_page.php?bookname=testbook&pageno=1')
                    .then(response => {
                        this.page = response.data;
                        // console.log(this.page);
                    })
                    .catch(error => { console.log(error); })
            },
            computed: {
                bgColorInHex: function () {
                    if (this.page == null) {
                        return 'white';
                    }
                    var bg = this.page.BackgroundColor
                    var rgb = StringFormat("rgb({0},{1},{2})", parseInt(bg.r * 255), parseInt(bg.g * 255), parseInt(bg.b * 255));
                    console.log(rgb);
                    var color = Color(rgb);
                    console.log(color);
                    return color.toCSS();
                },
            }

        });
    </script>
</body>

</html>